function By = fun_B(in)
y=in(1:4);
q=in(5:8);

q1=q(1);q2=q(2);q3=q(3);q4=q(4);
B=[(51*cos(q2))/16 - (25*cos(q1)^2)/32 + 128767/8000, (51*2^(1/2)*sin(pi/4 + q2))/64 - (51*2^(1/2)*cos(pi/4 + 2*q1 + q2))/64 - (77*2^(1/2)*cos(pi/4 + 2*q1 + 2*q2))/128 + 98019/16000,   1/4, 1707/1600;
   (51*2^(1/2)*sin(pi/4 + q2))/64 - (51*2^(1/2)*cos(pi/4 + 2*q1 + q2))/64 - (77*2^(1/2)*cos(pi/4 + 2*q1 + 2*q2))/128 + 98019/16000, (77*sin(q1 + q2)^2)/32 + 44197/8000,  53/4, 1707/1600;
    1/4,1/4, -25/2, 0;
    1707/1600,1707/1600, 0,-463/320];  
By=B*y;
end